(this["webpackJsonpreact-dnd-nested"]=this["webpackJsonpreact-dnd-nested"]||[]).push([[0],{39:function(e,r,t){e.exports=t(54)},45:function(e,r,t){},54:function(e,r,t){"use strict";t.r(r);var a=t(0),n=t.n(a),d=t(13),i=t.n(d),s=t(33),c=t(56),o=t(32),l=t(2),m=t(8),p=t(6),g={beginDrag:(e,r,t)=>({type:e.name}),endDrag(e,r){var t=r.getItem(),a=r.getDropResult();r.didDrop()&&a&&e.onEndDrag(a.id,t.type)}};var u=Object(p.DragSource)("ITEM",g,(function(e,r){return{connectDragSource:e.dragSource(),isDragging:r.isDragging()}}))((function(e){var r=e.connectDragSource,t=e.isDragging,a=e.children,d=e.name,i=t?"active":"";return r(n.a.createElement("div",{className:i,name:d},a),{dropEffect:"copy"})})),v=m.Menu.MenuItem,h=["View","Text","Button","Icon"];function I({onEndDrag:e}){return n.a.createElement(m.Menu,null,h.map((r,t)=>n.a.createElement(u,{name:r,key:t,onEndDrag:e},n.a.createElement(v,null,r))))}var D=t(7),E={border:"1px solid red",width:"100%",minHeight:"300px",padding:"10px",color:"#666",height:"auto"};class f extends a.Component{render(){return n.a.createElement("div",{style:E,className:this.props.className},"\u8fd9\u662f\u4e00\u4e2adiv\uff0c\u4f60\u53ef\u4ee5\u62d6\u5165\u5176\u4ed6\u5143\u7d20",this.props.children)}}class x extends a.Component{render(){return n.a.createElement("div",{className:this.props.className},"\u4e00\u6bb5\u7eaf\u6587\u672c\uff0c\u4e0d\u53ef\u4ee5\u62d6\u5165\u5176\u4ed6\u5143\u7d20")}}class y extends a.Component{render(){return n.a.createElement(m.Button,{type:"primary",className:this.props.className},"OK")}}class b extends a.Component{render(){return n.a.createElement(m.Icon,{type:"calendar",style:{fontSize:"16px",color:"#09a8e6"},className:this.props.className})}}var N={View:f,Text:x,Button:y,Icon:b},O={beginDrag(e){var r=e.parentId,t=e.item;return{id:t.id,parentId:r,type:t.type,items:t.childrens}},canDrag:e=>1!==e.item.id,isDragging:(e,r)=>e.item.id===r.getItem().id,endDrag(e,r){var t=r.getDropResult();if(t.dragItem){var a=t.dragItem,n=t.overItem;e.move(a,n)}}};var M={canDrop:(e,r)=>!0,drop(e,r){if(!r.didDrop()){var t=r.getItem(),a=t.id,n=t.parentId,d=e.parentId,i=e.item.id;if(a){if(a===i||a===d||n===i||null===d)return;return{dragItem:{draggedId:a,dragParentId:n},overItem:{overId:i,overParentId:d}}}return{id:i}}}};var C=Object(D.a)(class extends a.Component{render(){var e=this.props,r=e.connectDropTarget,t=e.connectDragSource,a=e.canDrop,i=e.isOver,s=e.item,c=e.move,o=s.id,l=s.type,m=s.childrens,p=N[l],g=a&&i?"activeHover":"";return n.a.createElement(p,{id:o,type:l,className:"item ".concat(g),ref:e=>{var a=Object(d.findDOMNode)(e);t(a),r(a)}},n.a.createElement(w,{parentId:o,items:m,move:c}))}}),j=Object(p.DropTarget)("ITEM",M,(function(e,r){return{connectDropTarget:e.dropTarget(),isOver:r.isOver({shallow:!0}),canDrop:r.canDrop()}}))(Object(p.DragSource)("ITEM",O,(function(e,r){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:r.isDragging()}}))(C)),w=Object(D.a)(class extends a.Component{render(){var e=this.props,r=e.parentId,t=e.items,a=e.move;return n.a.createElement(n.a.Fragment,null,t&&t.length?t.map(e=>n.a.createElement(j,{parentId:r,key:e.id,item:e,move:a})):null)}}),S=Object(D.a)(class extends a.Component{render(){var e=this.props,r=e.data,t=e.moveItem;return n.a.createElement("div",{className:"right"},n.a.createElement(w,{parentId:null,items:r,move:t}))}});function T(e,r){var t=null;return e.forEach(e=>{var a=e=>{if(e.id===r)return t=e;var n=e.childrens;if(n)for(var d=0;d<n.length;d+=1)a(n[d])};a(e)}),t}class P extends a.Component{constructor(e){super(e),this.data=[],this.handleAddCard=(e,r)=>{var t=T(this.data,e),a={id:Math.ceil(1e4*Math.random()),type:r};t.childrens?t.childrens.push(a):t.childrens=[a]},this.removeNode=(e,r)=>{var t=T(this.data,r),a=t.childrens.findIndex(r=>r.id===e);t.childrens.splice(a,1)},this.handleMove=(e,r)=>{var t=e.draggedId,a=e.dragParentId,n=r.overId,d=r.overParentId,i=Object(s.a)({},T(this.data,t)),c=T(this.data,d),o=c.childrens.findIndex(e=>e.id===n);this.removeNode(t,a),c.childrens.splice(o,0,i)},Object(l.l)(this,{data:l.m,handleAddCard:l.f,handleMove:l.f}),this.data=[{id:1,type:"View",childrens:[]}]}render(){return n.a.createElement("div",{className:"main"},n.a.createElement(c.a,{backend:o.a},n.a.createElement(I,{onEndDrag:this.handleAddCard}),n.a.createElement(S,{data:this.data,moveItem:this.handleMove})))}}var k=P,B=(t(44),t(45),document.getElementById("root"));i.a.render(n.a.createElement(k,null),B)}},[[39,1,2]]]);
//# sourceMappingURL=main.fa75964c.chunk.js.map